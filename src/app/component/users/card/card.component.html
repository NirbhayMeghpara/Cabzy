<div class="card m-b-0">
  <div class="card-body">
    <mat-dialog-content style="max-width: 600px">
      <h2 class="mb-12">{{ form }} Card</h2>
      <hr class="mb-24" />
      <form [formGroup]="creditCardForm" autocomplete="off" novalidate enctype="multipart/form-data">
        <div class="wrapper" *ngIf="!showForm">
          <mat-form-field [class.m-b-18]="defaultCard?.invalid && defaultCard?.touched">
            <mat-select id="card" placeholder="Select Card" formControlName="defaultCard">
              <ng-container *ngFor="let card of cards">
                <mat-option value="{{ card }}">{{ card }}</mat-option>
              </ng-container>
            </mat-select>
            <mat-error class="m-t-6" *ngIf="defaultCard?.invalid && defaultCard?.touched"
              ><i id="errorMark" class="fa-regular fa-circle-exclamation"></i>
              <span *ngIf="defaultCard?.hasError('required')">Please select a card</span>
            </mat-error>
          </mat-form-field>

          <div class="btn-container m-t-24" [class.d-none]="showForm">
            <button type="button" class="addBtn" data-toggle="modal" (click)="toggleForm()">
              <i-feather name="credit-card" class="icon-20 m-r-10 submit-icon"></i-feather>
              <span>Add Card</span>
            </button>
          </div>
        </div>

        <div class="addCreditCard" *ngIf="showForm">
          <div class="row m-b-30">
            <div class="col-lg-12">
              <mat-form-field
                class="w-100 fs-16"
                [class.m-b-18]="cardHolderName?.invalid && cardHolderName?.touched"
              >
                <input
                  matInput
                  type="text"
                  placeholder="Card Holder Name"
                  formControlName="cardHolderName"
                />
                <mat-error class="m-t-6" *ngIf="cardHolderName?.invalid && cardHolderName?.touched"
                  ><i id="errorMark" class="fa-regular fa-circle-exclamation"></i>
                  <span *ngIf="cardHolderName?.hasError('required')">Please enter card holder name</span>
                  <span *ngIf="cardHolderName?.hasError('pattern')"
                    >Please enter valid card holder name</span
                  >
                </mat-error>
              </mat-form-field>
            </div>

            <div class="col-lg-12">
              <mat-form-field
                class="w-100 fs-16"
                [class.m-b-18]="cardNumber?.invalid && cardNumber?.touched"
              >
                <input
                  matInput
                  type="text"
                  placeholder="Card Number"
                  maxlength="12"
                  minlength="12"
                  formControlName="cardNumber"
                />
                <mat-error class="m-t-6" *ngIf="cardNumber?.invalid && cardNumber?.touched"
                  ><i id="errorMark" class="fa-regular fa-circle-exclamation"></i>
                  <span *ngIf="cardNumber?.hasError('required')">Please enter a card number</span>
                  <span *ngIf="cardNumber?.hasError('pattern')">Please enter valid card number</span>
                  <span *ngIf="cardNumber?.hasError('minlength') && !cardNumber?.hasError('pattern')"
                    >Card number must be of 12 digit only</span
                  >
                </mat-error>
              </mat-form-field>
            </div>

            <div class="col-lg-6">
              <mat-form-field
                class="w-100 fs-16"
                [class.m-b-18]="expiryDate?.invalid && expiryDate?.touched"
              >
                <input
                  matInput
                  type="text"
                  placeholder="Expiry Date"
                  tabindex="-1"
                  formControlName="expiryDate"
                  readonly
                />
                <input type="hidden" [matDatepicker]="expiryDatepicker" />
                <mat-datepicker-toggle matIconSuffix [for]="expiryDatepicker"></mat-datepicker-toggle>
                <mat-datepicker
                  #expiryDatepicker
                  startView="multi-year"
                  (monthSelected)="setMonthAndYear($event, expiryDatepicker)"
                ></mat-datepicker>
                <mat-error class="m-t-6" *ngIf="expiryDate?.invalid && expiryDate?.touched"
                  ><i id="errorMark" class="fa-regular fa-circle-exclamation"></i>
                  <span *ngIf="expiryDate?.hasError('required')">Please enter card expiry date</span>
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-lg-6">
              <mat-form-field class="w-100 fs-16" [class.m-b-18]="cvv?.invalid && cvv?.touched">
                <input
                  matInput
                  type="text"
                  placeholder="CVV"
                  formControlName="cvv"
                  maxlength="3"
                  minlength="3"
                />
                <mat-error class="m-t-6" *ngIf="cvv?.invalid && cvv?.touched"
                  ><i id="errorMark" class="fa-regular fa-circle-exclamation"></i>
                  <span *ngIf="cvv?.hasError('required')">Please enter CVV number</span>
                  <span *ngIf="cvv?.hasError('pattern')">Please enter valid CVV number</span>
                  <span *ngIf="cvv?.hasError('minlength') && !cvv?.hasError('pattern')"
                    >CVV must be of 3 digit only</span
                  >
                </mat-error>
              </mat-form-field>
            </div>
          </div>

          <button
            type="button"
            mat-button-ripple-uninitialized
            mat-flat-button
            color="accent"
            class="mdc-button mdc-button--unelevated mat-mdc-unelevated-button mat-accent mat-mdc-button-base"
            mat-button-is-fab="false"
            (click)="onSubmitCard()"
          >
            <span class="mdc-button__label"> Add </span><span class="mat-mdc-focus-indicator"></span
            ><span class="mat-mdc-button-touch-target"></span></button
          ><button
            type="button"
            mat-button-ripple-uninitialized
            mat-stroked-button
            color="warn"
            class="m-l-8 mdc-button mdc-button--outlined mat-mdc-outlined-button mat-warn mat-mdc-button-base"
            mat-button-is-fab="false"
            (click)="toggleForm()"
          >
            <span class="mdc-button__label"> Cancel </span><span class="mat-mdc-focus-indicator"></span
            ><span class="mat-mdc-button-touch-target"></span>
          </button>
        </div>
      </form>
    </mat-dialog-content>
  </div>
</div>
